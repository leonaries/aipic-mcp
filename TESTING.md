# AI Picture MCP Server - æµ‹è¯•æŒ‡å—

## æµ‹è¯•æ¦‚è¿°

è¿™ä»½æ–‡æ¡£æè¿°äº†å¦‚ä½•æµ‹è¯• AI Picture MCP Server çš„å„ç§åŠŸèƒ½ã€‚

## å‰ç½®è¦æ±‚

1. ç¡®ä¿å·²å®‰è£…ä¾èµ–å¹¶æ„å»ºé¡¹ç›®ï¼š
```bash
npm install
npm run build
```

2. ç¡®ä¿æœ‰æœ‰æ•ˆçš„ ModelScope API å¯†é’¥ï¼ˆç”¨äºå®é™…å›¾åƒç”Ÿæˆæµ‹è¯•ï¼‰

## æµ‹è¯•æ–¹æ³•

### æ–¹æ³• 1: è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š

```bash
node test-mcp-server.js
```

è¿™ä¸ªè„šæœ¬ä¼šæµ‹è¯•ï¼š
- âœ… æœåŠ¡å™¨åˆå§‹åŒ–
- âœ… å·¥å…·åˆ—è¡¨è·å–
- âœ… å›¾åƒç”Ÿæˆå·¥å…·è°ƒç”¨æœºåˆ¶
- âœ… å‚æ•°éªŒè¯

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡! MCPæœåŠ¡å™¨å·¥ä½œæ­£å¸¸
```

### æ–¹æ³• 2: æ‰‹åŠ¨æµ‹è¯•

#### å¯åŠ¨æœåŠ¡å™¨
```bash
node dist/index.js
```

#### å‘é€æµ‹è¯•å‘½ä»¤

1. **åˆå§‹åŒ–ï¼š**
```json
{"jsonrpc":"2.0","id":1,"method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"test","version":"1.0.0"}}}
```

2. **åˆ—å‡ºå·¥å…·ï¼š**
```json
{"jsonrpc":"2.0","id":2,"method":"tools/list"}
```

3. **è°ƒç”¨å›¾åƒç”Ÿæˆï¼ˆéœ€è¦çœŸå®APIå¯†é’¥ï¼‰ï¼š**
```json
{"jsonrpc":"2.0","id":3,"method":"tools/call","params":{"name":"generate_web_image","arguments":{"prompt":"A beautiful sunset over mountains","apiKey":"YOUR_REAL_API_KEY","width":800,"height":600}}}
```

### æ–¹æ³• 3: Claude Desktop é›†æˆæµ‹è¯•

1. **é…ç½® Claude Desktopï¼š**

ç¼–è¾‘ `claude_desktop_config.json`ï¼š
```json
{
  "mcpServers": {
    "aipic": {
      "command": "node",
      "args": ["dist/index.js"],
      "cwd": "/Users/leon/Desktop/yideng/aipic-mcp"
    }
  }
}
```

2. **é‡å¯ Claude Desktop**

3. **æµ‹è¯•å¯¹è¯ï¼š**
```
ç”¨æˆ·ï¼šä½¿ç”¨ generate_web_image å·¥å…·ï¼Œç”Ÿæˆä¸€å¼ ç°ä»£åŠå…¬å®¤çš„å›¾ç‰‡ï¼Œprompt æ˜¯ "Modern office workspace with laptop and plants"ï¼Œä½¿ç”¨æˆ‘çš„ API å¯†é’¥ "your-api-key"
```

## æµ‹è¯•ç»“æœè§£è¯»

### æˆåŠŸçš„æµ‹è¯•ç»“æœ

- **åˆå§‹åŒ–æˆåŠŸï¼š** è¿”å›æœåŠ¡å™¨ä¿¡æ¯å’Œèƒ½åŠ›
- **å·¥å…·åˆ—è¡¨ï¼š** æ˜¾ç¤º `generate_web_image` å·¥å…·åŠå…¶å‚æ•°
- **å›¾åƒç”Ÿæˆï¼š** 
  - æœ‰æ•ˆAPIå¯†é’¥ï¼šè¿”å›å›¾ç‰‡è·¯å¾„å’Œ base64 æ•°æ®
  - æ— æ•ˆAPIå¯†é’¥ï¼šè¿”å› "Invalid API key" é”™è¯¯
- **å‚æ•°éªŒè¯ï¼š** ç¼ºå°‘å¿…éœ€å‚æ•°æ—¶è¿”å›ç›¸åº”é”™è¯¯

### å¸¸è§é—®é¢˜

1. **æœåŠ¡å™¨æ— å“åº”ï¼š**
   - æ£€æŸ¥ Node.js ç‰ˆæœ¬ (éœ€è¦ 18+)
   - ç¡®ä¿ä¾èµ–å·²æ­£ç¡®å®‰è£…
   - æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ

2. **API è°ƒç”¨å¤±è´¥ï¼š**
   - éªŒè¯ ModelScope API å¯†é’¥
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤ API é…é¢æœªç”¨å®Œ

3. **å›¾åƒä¿å­˜å¤±è´¥ï¼š**
   - æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæƒé™
   - ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨

## æ€§èƒ½æµ‹è¯•

### API å“åº”æ—¶é—´
- åˆå§‹åŒ–ï¼š< 100ms
- å·¥å…·åˆ—è¡¨ï¼š< 50ms  
- å›¾åƒç”Ÿæˆï¼š30-60ç§’ï¼ˆå–å†³äº ModelScope APIï¼‰

### å†…å­˜ä½¿ç”¨
- åŸºç¡€è¿è¡Œï¼š~50MB
- å¤„ç†å›¾åƒæ—¶ï¼š+20-100MBï¼ˆå–å†³äºå›¾åƒå¤§å°ï¼‰

## å®‰å…¨æµ‹è¯•

1. **API å¯†é’¥å¤„ç†ï¼š**
   - å¯†é’¥ä¸ä¼šè¢«è®°å½•åˆ°æ—¥å¿—
   - å¯†é’¥ä¸ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­
   - é”™è¯¯å“åº”ä¸ä¼šæ³„éœ²å¯†é’¥ä¿¡æ¯

2. **è¾“å…¥éªŒè¯ï¼š**
   - ç©ºçš„æˆ–æ— æ•ˆçš„ prompt è¢«æ‹’ç»
   - å‚æ•°ç±»å‹éªŒè¯æ­£å¸¸å·¥ä½œ
   - æ¶æ„è¾“å…¥è¢«é€‚å½“å¤„ç†

## æŒç»­é›†æˆå»ºè®®

åœ¨ CI/CD æµç¨‹ä¸­ï¼Œå¯ä»¥è¿è¡Œï¼š

```bash
# åŸºç¡€åŠŸèƒ½æµ‹è¯•ï¼ˆä¸éœ€è¦APIå¯†é’¥ï¼‰
npm test

# å®Œæ•´é›†æˆæµ‹è¯•ï¼ˆéœ€è¦APIå¯†é’¥ï¼‰
MODELSCOPE_API_KEY=your_key npm run test:integration
```

## æ•…éšœæ’é™¤

### å¸¸ç”¨è°ƒè¯•å‘½ä»¤

```bash
# æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å“åº”
echo '{"jsonrpc":"2.0","id":1,"method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"test","version":"1.0.0"}}}' | node dist/index.js

# æ£€æŸ¥æ„å»º
npm run build

# æ¸…ç†é‡è£…
rm -rf node_modules package-lock.json && npm install
```

### æ—¥å¿—åˆ†æ

æœåŠ¡å™¨é”™è¯¯ä¿¡æ¯ä¼šè¾“å‡ºåˆ° stderrï¼š
- ç½‘ç»œé”™è¯¯ï¼šæ£€æŸ¥è¿æ¥å’Œ API ç«¯ç‚¹
- è®¤è¯é”™è¯¯ï¼šéªŒè¯ API å¯†é’¥
- æ–‡ä»¶ç³»ç»Ÿé”™è¯¯ï¼šæ£€æŸ¥æƒé™å’Œç£ç›˜ç©ºé—´